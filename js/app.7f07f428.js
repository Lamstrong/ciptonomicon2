(function(){"use strict";var t={79138:function(t,e,r){var i=r(45130),n=(r(98992),r(54520),r(56768)),c=r(24232);const o={class:"filter_wrapper"},a={class:"clearHistoryLS_wrapper"},s={class:"items_wrapper"},l={class:"item_body"},u={class:"item_title"},f={style:{"font-size":"18px","font-weight":"700"},class:"item_price"},d=["onClick"];function p(t,e,r,p,k,h){const m=(0,n.g2)("add-ticker-component");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(m,{onCreateTicker:h.addTicker},null,8,["onCreateTicker"]),(0,n.Lk)("div",o,[e[2]||(e[2]=(0,n.Lk)("div",{class:"filter_title"},"Найти:",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>k.filter=t),class:"filter_input",type:"text"},null,512),[[i.Jo,k.filter]])]),(0,n.Lk)("div",a,[(0,n.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>h.clearLocalStorage&&h.clearLocalStorage(...t)),class:"clearHistory_btn"}," Очистить историю добавления ")]),(0,n.Lk)("div",s,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(h.filteredTickers(),((t,e)=>((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",u,(0,c.v_)(t.name)+" - USD",1),(0,n.Lk)("div",f,(0,c.v_)(h.formatPrice(t.price)),1),(0,n.Lk)("button",{onClick:t=>h.removeTicker(e),class:"deletre_btn"},"Удалить",8,d)])))),256))])],64)}r(44114),r(72577),r(3949),r(81454);var k=r(44847);const h="731d4cacf4190c9e96c213fda951d3f73e8292481b977ba0cfa69404fe2a06b6",m=(new Map,t=>fetch(`https://min-api.cryptocompare.com/data/pricemulti?fsyms=${t.join(",")}&tsyms=USD&api_key=${h}`).then((t=>t.json())).then((t=>Object.fromEntries(Object.entries(t).map((([t,e])=>[t,e.USD]))))).catch((t=>console.log(t)))),v={class:"ticker_wrapper"},b={class:"form",action:"#"};function g(t,e,r,c,o,a){const s=(0,n.g2)("add-button");return(0,n.uX)(),(0,n.CE)("div",v,[e[2]||(e[2]=(0,n.Lk)("h4",{class:"title"},"Тикер",-1)),(0,n.Lk)("form",b,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.tickerInput=t),class:"input",placeholder:"Например BTC",type:"text"},null,512),[[i.Jo,o.tickerInput]]),(0,n.bF)(s,{onClick:a.addTicker,class:"add_btn"},{default:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.eW)("Добавить")]))),_:1},8,["onClick"])])])}function L(t,e){return(0,n.uX)(),(0,n.CE)("button",{onClick:e[0]||(e[0]=e=>t.$emit("click")),class:"add_btn"},"Добавить")}var y=r(71241);const w={},_=(0,y.A)(w,[["render",L]]);var C=_,T={components:{AddButton:C},data(){return{tickerInput:""}},methods:{addTicker(){this.$emit("create-ticker",this.tickerInput),this.tickerInput=""}}};const O=(0,y.A)(T,[["render",g]]);var S=O;const I={class:"warning_wrapper"};function j(t,e,r,i,c,o){return(0,n.uX)(),(0,n.CE)("div",I,e[0]||(e[0]=[(0,n.Lk)("p",{style:{color:"red"},class:"warning"},"Такой тикер уже добавлен",-1)]))}var E={data(){return{checker:!1}},methods:{addTicker(){this.$emit("checkSimular",this.checker)}}};const x=(0,y.A)(E,[["render",j]]);var A=x,F={components:{AddTickerComponent:S,Warning:A},data(){return{tickerInput:"",tickerList:[],checker:!1,filter:""}},created(){const t=localStorage.getItem("criptonomicon-list");t&&(this.tickerList=JSON.parse(t)),(0,k.setInterval)((()=>this.updateTickers()),4e3)},watch:{tickerInput(){this.checker=!1}},methods:{formatPrice(t){return"-"===t?t:t>1?t.toFixed(2):t.toPrecision(2)},clearLocalStorage(){localStorage.clear(),this.tickerList.length=0},filteredTickers(){try{return this.tickerList.filter((t=>t.name.includes(this.filter)))}catch(t){console.log(t)}},async updateTickers(){if(!this.tickerList.length)return;const t=await m(this.tickerList.map((t=>t.name)));this.tickerList.forEach((e=>{const r=t[e.name.toUpperCase()];e.price=r||"-"}))},addTicker(t,e){const r={id:Date.now(),name:t,price:"-"};console.log(t);const i=this.tickerList.find((t=>t.name===r.name));if(0===t.length||i){if(i)return void(this.checker=!this.checker)}else this.tickerList.push(r),this.filter="",localStorage.setItem("criptonomicon-list",JSON.stringify(this.tickerList))},removeTicker(t){this.tickerList.splice(t,1)}}};const U=(0,y.A)(F,[["render",p]]);var X=U;(0,i.Ef)(X).mount("#app")}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var c=e[i]={exports:{}};return t[i].call(c.exports,c,c.exports,r),c.exports}r.m=t,function(){var t=[];r.O=function(e,i,n,c){if(!i){var o=1/0;for(u=0;u<t.length;u++){i=t[u][0],n=t[u][1],c=t[u][2];for(var a=!0,s=0;s<i.length;s++)(!1&c||o>=c)&&Object.keys(r.O).every((function(t){return r.O[t](i[s])}))?i.splice(s--,1):(a=!1,c<o&&(o=c));if(a){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}c=c||0;for(var u=t.length;u>0&&t[u-1][2]>c;u--)t[u]=t[u-1];t[u]=[i,n,c]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,c,o=i[0],a=i[1],s=i[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(s)var u=s(r)}for(e&&e(i);l<o.length;l++)c=o[l],r.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return r.O(u)},i=self["webpackChunkciptonomicon2"]=self["webpackChunkciptonomicon2"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=r.O(void 0,[504],(function(){return r(79138)}));i=r.O(i)})();
//# sourceMappingURL=app.7f07f428.js.map